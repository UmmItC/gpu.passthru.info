"use strict";(self.webpackChunkgpu_passthru_info=self.webpackChunkgpu_passthru_info||[]).push([[619],{4811:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"virt-manager/storage-path-qcow2-images","title":"Storage Path for Libvirt qcow2 Images","description":"Libvirt uses storage pools to manage virtual machine disk images, and the default storage pool for qcow2 images is often named default. Here\'s a step-by-step guide on how to change the default storage path for libvirt qcow2 images:","source":"@site/docs/virt-manager/storage-path-qcow2-images.mdx","sourceDirName":"virt-manager","slug":"/virt-manager/storage-path-qcow2-images","permalink":"/docs/virt-manager/storage-path-qcow2-images","draft":false,"unlisted":false,"editUrl":"https://github.com/UmmItC/gpu-passthru/tree/master/docs/virt-manager/storage-path-qcow2-images.mdx","tags":[],"version":"current","lastUpdatedBy":"UmmIt","lastUpdatedAt":1735767977000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Convert VirtualBox VDI to QEMU QCOW2 Image","permalink":"/docs/virt-manager/convert-qcow2-to-vdi"},"next":{"title":"Backup and Restoration QCOW2 and XML Configuration","permalink":"/docs/virt-manager/backup-qcow2-and-xml"}}');var i=o(4848),n=o(8453);const r={sidebar_position:5},s="Storage Path for Libvirt qcow2 Images",l={},d=[{value:"Step 1: Switch to Root User",id:"step-1-switch-to-root-user",level:2},{value:"Step 2: Identify the Default Storage Pool",id:"step-2-identify-the-default-storage-pool",level:2},{value:"Additional Step: Creating a New Storage Pool",id:"additional-step-creating-a-new-storage-pool",level:3},{value:"Step 3: View the Current Pool Configuration",id:"step-3-view-the-current-pool-configuration",level:2},{value:"Step 4: Edit the Pool Configuration",id:"step-4-edit-the-pool-configuration",level:2},{value:"Step 5: Modify the Path",id:"step-5-modify-the-path",level:2},{value:"Step 6: Restart the Storage Pool",id:"step-6-restart-the-storage-pool",level:2},{value:"Step 7: Verify the Changes",id:"step-7-verify-the-changes",level:2},{value:"Reference",id:"reference",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"storage-path-for-libvirt-qcow2-images",children:"Storage Path for Libvirt qcow2 Images"})}),"\n",(0,i.jsxs)(t.p,{children:["Libvirt uses storage pools to manage virtual machine disk images, and the default storage pool for qcow2 images is often named ",(0,i.jsx)(t.code,{children:"default."})," Here's a step-by-step guide on how to change the default storage path for libvirt qcow2 images:"]}),"\n",(0,i.jsx)(t.h2,{id:"step-1-switch-to-root-user",children:"Step 1: Switch to Root User"}),"\n",(0,i.jsxs)(t.p,{children:["Since ",(0,i.jsx)(t.code,{children:"virsh"})," commands typically require root permissions, it's recommended to switch to the root user to execute them directly without the need for ",(0,i.jsx)(t.code,{children:"sudo"}),". You can switch to the root user by using the following command:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"su\n"})}),"\n",(0,i.jsx)(t.h2,{id:"step-2-identify-the-default-storage-pool",children:"Step 2: Identify the Default Storage Pool"}),"\n",(0,i.jsx)(t.p,{children:"Begin by listing all storage pools to identify the default one. Execute the following command:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"virsh pool-list --all\n"})}),"\n",(0,i.jsxs)(t.p,{children:["This command will display a list of available storage pools. Look for a pool named ",(0,i.jsx)(t.code,{children:"default"})," and take note of its type."]}),"\n",(0,i.jsx)(t.h3,{id:"additional-step-creating-a-new-storage-pool",children:"Additional Step: Creating a New Storage Pool"}),"\n",(0,i.jsxs)(t.p,{children:["If the default storage pool is not set to ",(0,i.jsx)(t.code,{children:"default"})," or if you want to create a new pool, you can use the following command to define a new pool and set it as the default:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"virsh pool-define-as --name default --type dir --target /your/path/you/wish\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Replace ",(0,i.jsx)(t.code,{children:"/your/path/you/wish"})," with the desired path for the new storage pool. This step is optional and can be used if you prefer a different storage pool as the default one."]}),"\n",(0,i.jsx)(t.h2,{id:"step-3-view-the-current-pool-configuration",children:"Step 3: View the Current Pool Configuration"}),"\n",(0,i.jsxs)(t.p,{children:["To see the current configuration of the ",(0,i.jsx)(t.code,{children:"default"})," pool, or the pool you identified in step 1, use the following command:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"virsh pool-dumpxml default\n"})}),"\n",(0,i.jsx)(t.h2,{id:"step-4-edit-the-pool-configuration",children:"Step 4: Edit the Pool Configuration"}),"\n",(0,i.jsx)(t.p,{children:"Edit the pool configuration using a text editor. By default, a clear distro like Arch may use vi as the default editor. If you prefer using something like nano or vim or nvim, you can set the editor explicitly. For example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"EDITOR=nvim virsh pool-edit default\n"})}),"\n",(0,i.jsx)(t.p,{children:"This opens the pool's XML configuration in the specified text editor."}),"\n",(0,i.jsx)(t.h2,{id:"step-5-modify-the-path",children:"Step 5: Modify the Path"}),"\n",(0,i.jsxs)(t.p,{children:["Find the ",(0,i.jsx)(t.code,{children:"<path>"})," element in the XML configuration and modify its value to set the new path for the storage. For example:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:"<path>/new/path/to/storage</path>\n"})}),"\n",(0,i.jsx)(t.p,{children:"Save the changes and exit the text editor."}),"\n",(0,i.jsx)(t.h2,{id:"step-6-restart-the-storage-pool",children:"Step 6: Restart the Storage Pool"}),"\n",(0,i.jsx)(t.p,{children:"After modifying the XML configuration, restart the storage pool for the changes to take effect:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"virsh pool-destroy default\nvirsh pool-start default\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Replace ",(0,i.jsx)(t.code,{children:"default"})," with the actual name of your storage pool."]}),"\n",(0,i.jsx)(t.h2,{id:"step-7-verify-the-changes",children:"Step 7: Verify the Changes"}),"\n",(0,i.jsx)(t.p,{children:"Confirm that the changes have taken effect by running:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"virsh pool-info default\n"})}),"\n",(0,i.jsx)(t.h2,{id:"reference",children:"Reference"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://ostechnix.com/how-to-change-kvm-libvirt-default-storage-pool-location/",children:"How To Change KVM Libvirt Default Storage Pool Location"})}),"\n"]})]})}function c(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>s});var a=o(6540);const i={},n=a.createContext(i);function r(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);